- type: entity
  name: BasePistol
  parent: BaseItem
  id: BaseWeaponPistol
  description: A rooty tooty point and shooty.
  abstract: true
  components:
  - type: Sprite
    layers:
      - state: base
        map: ["enum.GunVisualLayers.Base"]
      - state: mag-0
        map: ["enum.GunVisualLayers.Mag"]
  - type: Item
    size: Small
    shape:
    - 0,0,1,0
    - 0,1,0,1
  - type: Tag
    tags:
    - Sidearm
  - type: Clothing
    sprite: Objects/Weapons/Guns/Pistols/viper.rsi
    quickEquip: false
    slots:
    - suitStorage
    - Belt
  - type: Gun
    fireRate: 6
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
      - FullAuto
    soundGunshot:
      path: /Audio/_Crescent/Weapons/Guns/pistol_2/pistol_gunshot_1.ogg
  - type: ChamberMagazineAmmoProvider
    soundRack:
      path: /Audio/Weapons/Guns/Cock/pistol_cock.ogg
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazinePistol
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
            - MagazinePistol
        whitelistFailPopup: gun-magazine-whitelist-fail
      gun_chamber:
        name: Chamber
        startingItem: CartridgePistol
        priority: 1
        whitelist:
          tags:
            - CartridgePistol
  - type: ContainerContainer
    containers:
      gun_magazine: !type:ContainerSlot
      gun_chamber: !type:ContainerSlot
  - type: AmmoCounter
  - type: MagazineVisuals
    magState: mag
    steps: 1
    zeroVisible: true
  - type: Appearance
  - type: StaticPrice
    price: 500
  - type: Execution
  - type: MeleeWeapon
    attackRate: 1.2
    damage:
      types:
        Blunt: 7.5
    swapKeys: true
    disableHeavy: true
    animation: WeaponArcThrust
    wideAnimationRotation: 135
    soundHit:
      collection: MetalThud
  - type: DamageOtherOnHit
    staminaCost: 5
  - type: EmitSoundOnPickup
    sound: /Audio/_Crescent/Weapons/Interact/gun_pick.ogg
  - type: EmitSoundOnDrop
    sound: /Audio/_Crescent/Weapons/Interact/gun_drop.ogg

- type: entity
  name: viper
  parent: [BaseWeaponPistol, BaseSyndicateContraband]
  id: WeaponPistolViper
  description: A small, easily concealable, but somewhat underpowered gun, produced by a bulk arms manufacturer now defunct for over a century. Uses 9x19mm PSTF ammo.
  components:
  - type: Sprite
    sprite: _Crescent/Objects/Weapons/Guns/viper.rsi
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazinePistol
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
            - MagazinePistol
            - MagazinePistolHighCapacity
        whitelistFailPopup: gun-magazine-whitelist-fail
      gun_chamber:
        name: Chamber
        startingItem: CartridgePistol
        priority: 1
        whitelist:
          tags:
            - CartridgePistol
  - type: ContainerContainer
    containers:
      gun_magazine: !type:ContainerSlot
      gun_chamber: !type:ContainerSlot
  - type: Gun
    fireRate: 6
    selectedMode: SemiAuto
    availableModes:
    - SemiAuto
    - FullAuto
    soundGunshot:
      path: /Audio/_Crescent/Weapons/Guns/pistol_2/pistol_gunshot_1.ogg
    fireOnDropChance: 0.3

- type: entity
  name: PTA Viper 9x19mm
  parent: WeaponPistolViper
  id: WeaponPistolViperEmpty
  suffix: Empty
  components:
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: null
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
          - MagazinePistol
          - MagazinePistolHighCapacity
      gun_chamber:
        name: Chamber
        startingItem: null
        priority: 1
        whitelist:
          tags:
          - CartridgePistol

- type: entity
  name: PTA Viper 9x19mm
  parent: WeaponPistolViper
  id: WeaponPistolViperSecurity
  description: A small, easily concealable, but somewhat underpowered gun, produced by a bulk arms manufacturer now defunct for over a century.
    Uses .35 auto ammo. The serial number on the handguard marks this gun as belonging to an NT Security Officer.
  suffix: Security Loadouts
  components:
  - type: GuideHelp
    guides: [ SecurityWeapons ]

- type: entity
  name: echis
  parent: [ BaseItem, BaseSyndicateContraband ]
  id: WeaponPistolEchis
  description: A viper for use by cyborgs. Creates .35 ammo on the fly from an internal ammo fabricator, which slowly self-charges.
  components:
  - type: Gun
    fireRate: 5
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
      - FullAuto
    soundGunshot:
      path: /Audio/Weapons/Guns/Gunshots/pistol.ogg
  - type: Sprite
    sprite: Objects/Weapons/Guns/Pistols/viper.rsi
    layers:
      - state: base
        map: ["enum.GunVisualLayers.Base"]
      - state: mag-0
        map: ["enum.GunVisualLayers.Mag"]
  - type: ContainerContainer
    containers:
      ballistic-ammo: !type:Container
  - type: ProjectileBatteryAmmoProvider
    proto: BulletPistol
    fireCost: 100
  - type: Battery
    maxCharge: 1000
    startingCharge: 1000
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 25
  - type: AmmoCounter

- type: entity
  name: cobra
  parent: [ BaseWeaponPistol, BaseSyndicateContraband ]
  id: WeaponPistolCobra
  description: A rugged, robust operator handgun with inbuilt silencer. Uses 9x39mm caseless ammo.
  components:
  - type: Sprite
    sprite: _Crescent/Objects/Weapons/Guns/cobra.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-0
      map: ["enum.GunVisualLayers.Mag"]
  - type: ChamberMagazineAmmoProvider
  - type: Gun
    damageModifier: 1.25 # "Extra Robust" despite having an underpowered cartridge.
    fireRate: 4
    soundGunshot:
      path: /Audio/_Crescent/Weapons/Guns/supressed_1/supressed_gunshot_2.ogg
      params:
        volume: -10
    availableModes:
    - SemiAuto
    fireOnDropChance: 0.1
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazinePistolCaselessRifle
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
            - MagazinePistolCaselessRifle
        whitelistFailPopup: gun-magazine-whitelist-fail
      gun_chamber:
        name: Chamber
        startingItem: CartridgeCaselessRifle
        priority: 1
        whitelist:
          tags:
            - CartridgeCaselessRifle
  - type: ContainerContainer
    containers:
      gun_magazine: !type:ContainerSlot
      gun_chamber: !type:ContainerSlot
  - type: ExtendDescription
    descriptionList:
      - description: This pistol comes with a muzzle booster. It deals 25% higher damage per shot.
        fontSize: 12
        color: "#ff4f00"
        requireDetailRange: false

- type: entity
  name: PTA T2 Cobra 9x39mm
  parent: WeaponPistolCobra
  id: WeaponPistolCobraEmpty
  suffix: Empty
  components:
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: null
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
          - MagazinePistolCaselessRifle
      gun_chamber:
        name: Chamber
        startingItem: null
        priority: 1
        whitelist:
          tags:
          - CartridgeCaselessRifle

- type: entity
  name: mk 58
  parent: [BaseWeaponPistol, BaseRestrictedContraband]
  id: WeaponPistolMk58
  description: A cheap, oversized, and unreliable pistol. You’d be better off using it to beat someone to death, assuming it doesn’t shatter into 16 pieces after the first hit. Uses small 6mm ammo.
  components:
  - type: Sprite
    sprite: _Crescent/Objects/Weapons/Guns/tayamura.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-0
      map: ["enum.GunVisualLayers.Mag"]
  - type: Gun
    fireRate: 5
    availableModes:
    - SemiAuto
    soundGunshot:
      path: /Audio/_Crescent/Weapons/Guns/pistol_1/pistol_gunshot_3.ogg
    fireOnDropChance: 0.5
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazinePistol6mm
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
            - MagazinePistol6mm
      gun_chamber:
        name: Chamber
        startingItem: CartridgePistol6mm
        priority: 1
        whitelist:
          tags:
            - CartridgePistol6mm

- type: entity
  name: SHI MK58 Tayamura 9x19mm
  parent: WeaponPistolMk58
  id: WeaponPistolMk58Empty
  suffix: Empty
  components:
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: null
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
          - MagazinePistol
      gun_chamber:
        name: Chamber
        startingItem: null
        priority: 1
        whitelist:
          tags:
          - CartridgePistol

- type: entity
  name: SHI MK58 Tayamura 9x19mm
  parent: WeaponPistolMk58
  id: WeaponPistolMk58Security
  description: A cheap, ubiquitous sidearm, produced by a NanoTrasen subsidiary. Uses .35 auto ammo.
    The serial number on the handguard marks this gun as belonging to an NT Security Officer.
  suffix: Security Loadouts
  components:
  - type: GuideHelp
    guides: [ SecurityWeapons ]

- type: entity
  name: N1984
  parent: [BaseWeaponPistol, BaseRestrictedContraband]
  id: WeaponPistolN1984 # the spaces in description are for formatting.
  description: The sidearm of any self respecting officer. Comes in .327, the lord's caliber.
  components:
  - type: Sprite
    sprite: _Crescent/Objects/Weapons/Guns/liberty.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-0
      map: ["enum.GunVisualLayers.Mag"]
  - type: Gun
    minAngle: 1
    maxAngle: 20
    angleIncrease: 8
    angleDecay: 9
    fireRate: 4
    availableModes:
    - SemiAuto
    soundGunshot:
      path: /Audio/_Crescent/Weapons/Guns/M1911/pistol_gunshot_2.ogg
    fireOnDropChance: 0.6
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MagazineMagnum
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
            - MagazineMagnum
        whitelistFailPopup: gun-magazine-whitelist-fail
      gun_chamber:
        name: Chamber
        startingItem: CartridgeMagnum
        priority: 1
        whitelist:
          tags:
            - CartridgeMagnum

- type: entity
  name: NT N1984 Marston .327
  parent: WeaponPistolN1984
  id: WeaponPistolN1984Empty
  suffix: Empty
  components:
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: null
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        priority: 2
        whitelist:
          tags:
          - MagazineMagnum
      gun_chamber:
        name: Chamber
        startingItem: null
        priority: 1
        whitelist:
          tags:
          - CartridgeMagnum

- type: entity
  name: NT N1984 Marston .327
  parent: WeaponPistolN1984
  id: WeaponPistolN1984Security # the spaces in description are for formatting.
  description: The sidearm of any self respecting officer.     Comes in .45 magnum, the lord's caliber.
    The serial number on the handguard marks this gun as belonging to an NT Security Officer.
  suffix: Security Loadouts
  components:
  - type: GuideHelp
    guides: [ SecurityWeapons ]
